<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>lx zin 창호 제안</title>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link rel="stylesheet" href="main.css" />
  </head>
  <body class="main">
    <main id="contentsArea">
      <!-- <div class="visual">
        <div class="mainLine"></div>
        <div class="txt txt1">
          <h3 class="alex">국내최초</h3>
        </div>
        <div class="txt txt2">
          <h3 class="alex">배젤리스 창호</h3>
        </div>
        <div class="contentWrap">
          <video src="./img/mainVideo.mp4" muted loop playsinline autoplay></video>
        </div>
        <div class="textWrap">
          <h4>새로운 가치를 창조하는 <br class="mo" />부동산 투자의 미래 <br />LOTTE AMC가 함께 합니다.</h4>
          <p>함께 가는 투자 파트너, LOTTE AMC</p>
        </div>
      </div> -->

      <!-- section 02 -->
      <section class="section02">
        <div class="swiper-container">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <div class="slide-inner section02-1"></div>
              <video src="./img/section2-01.mp4" muted></video>
            </div>
            <div class="swiper-slide">
              <div class="slide-inner section02-2"></div>
              <video src="./img/section2-02.mp4" muted></video>
            </div>
            <div class="swiper-slide">
              <div class="slide-inner section02-3"></div>
              <video src="./img/section2-03.mp4" muted></video>
            </div>
          </div>
        </div>
      </section>
      <!-- section 03 -->
      <section class="section03"></section>
      <!-- section 04 -->
      <section class="section04"></section>
    </main>
  </body>
  <script src="jquery-1.12.4.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script src="TweenMax.min.js"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    // main visual
    let mainVisual = gsap.timeline({
      scrollTrigger: {
        trigger: '.visual',
        start: 'top top',
        scrub: true,
        markers: false,
        pin: true
      }
    });

    mainVisual
      .addLabel('label1')
      .to('.main .visual .txt', { xPercent: 0, yPercent: 0, duration: 6 }, 'start0')
      .to('.main .visual .txt1', { left: '130rem', duration: 6 }, 'start0')
      .to(
        '.main .visual .txt2',
        {
          left: 'calc(100% - 360rem)',
          duration: 6
        },
        'start0'
      )
      .to(
        '.main .visual .mainLine',
        {
          width: '0',
          height: '0',
          xPercent: -50,
          yPercent: -50,
          duration: 3
        },
        'start0'
      )

      .to('.main .visual', { duration: 6 }, 'start1')
      .to(
        '.main .visual .mainLine',
        {
          width: '56rem',
          height: '100%',
          xPercent: -50,
          yPercent: -50,
          y: 0,
          rotation: 0,
          duration: 3
        },
        'start2'
      )
      .to(
        '.main .visual .contentWrap',
        {
          xPercent: -50,
          yPercent: -50,
          y: 0,
          rotation: 0,
          height: '560rem',
          opacity: '1',
          duration: 3
        },
        'start2'
      )
      .to('.main .visual .txt', { opacity: '0', duration: 7 }, 'start3')
      .to('.main .visual .mainLine', { opacity: '0', duration: 7 }, 'start3')
      .to('.main .visual .contentWrap', { width: '100%', height: '100%', duration: 7 }, 'start4')
      .to('.main .visual .textWrap', { opacity: '1', duration: 3 }, 'start5')
      .to('.main .visual', { duration: 3 }, 'start6');

    let _window = $(window).innerWidth();

    ScrollTrigger.config({
      limitCallbacks: true,
      ignoreMobileResize: true
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var interleaveOffset = 0.5;

      var swiperOptions = {
        loop: true,
        speed: 1000,
        grabCursor: true,
        watchSlidesProgress: true,
        mousewheelControl: true,
        keyboardControl: true,
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev'
        },
        on: {
          progress: function () {
            var swiper = this;
            for (var i = 0; i < swiper.slides.length; i++) {
              var slideProgress = swiper.slides[i].progress;
              var innerOffset = swiper.width * interleaveOffset;
              var innerTranslate = slideProgress * innerOffset;
              swiper.slides[i].querySelector('.slide-inner').style.transform = 'translate3d(' + innerTranslate + 'px, 0, 0)';
            }
          },
          slideChangeTransitionStart: function () {
            document.querySelectorAll('.swiper-slide video').forEach((video) => {
              video.currentTime = 0; // 비디오를 첫 프레임으로 리셋
              video.pause(); // 일시 정지 상태로 설정하여 첫 프레임에서 대기
            });
          },
          slideChangeTransitionEnd: function () {
            const activeVideo = document.querySelector('.swiper-slide-active video');
            activeVideo.currentTime = 0; // 비디오를 첫 프레임으로 리셋
            activeVideo.play(); // 활성 슬라이드의 비디오 재생
          },
          touchStart: function () {
            var swiper = this;
            for (var i = 0; i < swiper.slides.length; i++) {
              swiper.slides[i].style.transition = '';
            }
          },
          setTransition: function (speed) {
            var swiper = this;
            for (var i = 0; i < swiper.slides.length; i++) {
              swiper.slides[i].style.transition = speed + 'ms';
              swiper.slides[i].querySelector('.slide-inner').style.transition = speed + 'ms';
            }
          }
        }
      };

      var swiper = new Swiper('.swiper-container', swiperOptions);
    });
  </script>
</html>
